<header class="bg-white shadow-lg py-2 relative z-50">
  <div class="container mx-auto flex items-center justify-between px-6">
    <!-- Menu de gauche (caché sur mobile) -->
    <nav class="hidden md:flex space-x-6">
      <a
        href="/formations"
        class="text-xl menu-link text-gray-700 font-semibold hover:text-purple-600 transition"
        >Formations</a
      >
      <a
        href="/entreprise"
        class="text-xl menu-link text-gray-700 font-semibold hover:text-purple-600 transition"
        >Entreprise</a
      >
    </nav>

    <!-- Logo centré -->
    <a href="/" class="mx-auto">
      <img
        src="/images/header/logo-kaelia.png"
        alt="Kaelia Logo"
        class="h-20 md:h-24"
      />
    </a>

    <!-- Menu de droite (caché sur mobile) -->
    <nav class="hidden md:flex space-x-6">
      <a
        href="/le-klub"
        class=" text-xl menu-link text-gray-700 font-semibold hover:text-purple-600 transition"
        >Le Klub</a
      >
      <a
        href="/contact"
        class="text-xl menu-link text-gray-700 font-semibold hover:text-purple-600 transition"
        >Contact</a
      >
    </nav>

    <!-- Bouton hamburger pour les petits écrans -->
    <button id="menu-btn" class="md:hidden text-gray-700 focus:outline-none">
      <svg
        id="hamburger-icon"
        class="h-8 w-8 transition-transform"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Menu mobile en plein écran avec animation -->
  <div
    id="mobile-menu"
    class="fixed inset-0 bg-white flex flex-col items-center justify-center space-y-6 text-lg font-semibold text-gray-700 z-40 transform -translate-y-full transition-transform duration-300 ease-in-out"
  >
    <!-- Bouton pour fermer le menu mobile -->
    <button
      id="close-menu-btn"
      class="absolute top-4 right-4 text-gray-700 focus:outline-none"
    >
      <svg
        class="h-8 w-8"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <!-- Nouveau menu Accueil ajouté pour mobile -->
    <a
      href="/"
      class="menu-link text-gray-700 hover:text-purple-600 transition text-xl"
      >Accueil</a
    >

    <a
      href="/formations"
      class="menu-link text-gray-700 hover:text-purple-600 transition text-xl"
      >Formations</a
    >
    <a
      href="/entreprise"
      class="menu-link text-gray-700 hover:text-purple-600 transition text-xl"
      >Entreprise</a
    >
    <a
      href="/le-klub"
      class="menu-link text-gray-700 hover:text-purple-600 transition text-xl"
      >Le Klub</a
    >
    <a
      href="/contact"
      class="menu-link text-gray-700 hover:text-purple-600 transition text-xl"
      >Contact</a
    >
  </div>
</header>

<!-- Script pour gérer l'affichage du menu mobile et l'élément actif -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const menuBtn = document.getElementById("menu-btn")!;
    const mobileMenu = document.getElementById("mobile-menu")!;
    const menuLinks = document.querySelectorAll(".menu-link");
    const closeMenuBtn = document.getElementById("close-menu-btn")!;

    // Afficher/Masquer le menu mobile avec animation au clic
    if (menuBtn && mobileMenu) {
      menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("open");
        menuBtn.classList.toggle("active");
      });
    }

    if (closeMenuBtn && mobileMenu) {
      closeMenuBtn.addEventListener("click", () => {
        mobileMenu.classList.remove("open");
        menuBtn.classList.remove("active");
      });
    }

    // Récupérer l'URL actuelle et retirer le dernier / s'il est présent
    let currentPath = window.location.pathname;
    if (currentPath.endsWith("/")) {
      currentPath = currentPath.slice(0, -1);
    }

    // Boucler sur chaque lien et ajouter la classe 'active' si l'URL correspond
    menuLinks.forEach((link) => {
      let linkPath = link.getAttribute("href");

      // Vérifier que linkPath n'est pas null avant d'accéder à ses méthodes
      if (linkPath && linkPath.endsWith("/")) {
        linkPath = linkPath.slice(0, -1);
      }

      if (linkPath === currentPath) {
        link.classList.add("active");
      }

      // Ajouter l'événement de clic pour changer l'état actif
      link.addEventListener("click", function () {
        // Supprimer la classe active de tous les liens
        menuLinks.forEach((l) => l.classList.remove("active"));
        // Ajouter la classe active au lien cliqué
        link.classList.add("active");
      });
    });
  });
</script>

<style>
  /* Styles pour le lien actif */
  .active {
    color: #6b46c1; /* Violet */
    font-weight: bold;
    text-decoration: underline;
    text-underline-offset: 4px;
  }

  /* Styles du menu mobile pour un espacement plus grand et un look épuré */
  #mobile-menu a {
    padding: 0.75rem 0;
    font-size: 1.25rem; /* Taille de texte légèrement plus grande */
  }

  /* Transition pour le bouton hamburger */
  #menu-btn svg {
    transition: transform 0.3s;
  }
  #menu-btn.active svg {
    transform: rotate(90deg); /* Rotation pour indiquer l'ouverture */
  }

  /* Animation pour le menu mobile */
  #mobile-menu {
    /* État initial : déplacé vers le haut hors de la vue */
    transform: translateY(-100%);
    transition: transform 0.3s ease-in-out;
  }
  #mobile-menu.open {
    /* Lorsque ouvert : en place */
    transform: translateY(0);
  }
</style>
