---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <!-- Section d'en-tête pleine écran avec image de fond -->
  <div
    class="relative h-screen w-full bg-cover bg-center"
    style="background-image: url('/images/le-klub/photo-de-fond.jpg');"
  >
    <!-- Couche semi-transparente pour améliorer la lisibilité du texte -->
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>

    <!-- Contenu centré -->
    <div
      class="relative z-10 flex flex-col justify-center items-center text-center h-full px-6"
    >
      <h1 class="text-white text-5xl sm:text-6xl font-bold mb-4">Le Klub</h1>
      <p class="text-white sm:text-xl text-md max-w-3xl mx-auto">
        Des professionnels qualifiés pour vous accompagner dans votre projet
      </p>
    </div>
  </div>

  <div class="bg-white py-12 px-6">
    <!-- Filters Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mb-8">
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none active-button"
        data-category="all"
      >
        Tous
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="Informatique"
      >
        Informatique
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="RSE"
      >
        RSE
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="Juridique"
      >
        Juridique
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="Entreprenariat"
      >
        Entreprenariat
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="Management"
      >
        Management
      </button>
      <button
        class="filter-button bg-gradient-to-r from-blue-800 to-purple-600 text-white py-3 px-6 rounded-full focus:outline-none"
        data-category="team"
      >
        Équipe pédagogique
      </button>
    </div>

    <!-- Ligne avec carré de couleur différente -->
    <div class="flex justify-center items-center mb-12">
      <div class="w-1/4 border-t border-black"></div>
      <div class="mx-2 h-4 w-4 bg-purple-600"></div>
      <div class="w-1/4 border-t border-black"></div>
    </div>

    <!-- Trainers Cards Section -->
    <section class="bg-white py-12">
      <div
        class="container mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 justify-items-center"
        id="trainer-list"
      >
        <!-- Cartes Formateurs existants -->
        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="Juridique"
        >
          <img
            src="/images/formateurs/tarik.png"
            loading="lazy"
            alt="Tarik BACHIR"
            class="w-full h-full object-cover aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Tarik BACHIR</h3>
            <p class="text-sm">Avocat au barreau de Lyon</p>
            <span class="text-sm text-cyan-400">Juridique</span>
          </div>
        </div>

        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="RSE"
        >
          <img
            src="/images/formateurs/aurelia.png"
            loading="lazy"
            alt="Aurélia SAINT-JEAN"
            class="w-full h-full object-cover aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Aurélia SAINT-JEAN</h3>
            <p class="text-sm">Coach certifiée</p>
            <span class="text-sm text-blue-400">Coaching</span>
            <span class="text-sm text-purple-400">RSE</span>
          </div>
        </div>

        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="RSE Coaching"
        >
          <img
            src="/images/formateurs/hayet.png"
            loading="lazy"
            alt="Hayet RHARDA BOUALI"
            class="w-full h-full object-cover aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Hayet RHARDA BOUALI</h3>
            <p class="text-sm">Coach certifiée</p>
            <span class="text-sm text-blue-400">Coaching</span>
            <span class="text-sm text-purple-400">RSE</span>
          </div>
        </div>

        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="Informatique"
        >
          <img
            src="/images/formateurs/cellya.jpg"
            loading="lazy"
            alt="Cellya SIROT"
            class="w-full h-full object-cover aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Cellya SIROT</h3>
            <p class="text-sm">Développeuse web</p>
            <span class="text-sm text-blue-400">Informatique</span>
          </div>
        </div>

        <!-- Équipe pédagogique (catégorie "team") -->
        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="team"
        >
          <img
            src="/images/le-klub/photo-martin.jpg"
            loading="lazy"
            alt="Martin BARRE"
            class="w-full h-full object-cover object-[center_10%] aspect-square"

          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Martin BARRE</h3>
            <p class="text-sm">Développeur Web</p>
            <span class="text-sm text-cyan-400">Informatique</span>
          </div>
        </div>

        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="team"
        >
          <img
            src="/images/le-klub/photo-karine.jpg"
            loading="lazy"
            alt="Karine WEIL"
            class="w-full h-full object-cover object-[center_10%] aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Karine WEIL</h3>
            <p class="text-sm">???</p>
            <span class="text-sm text-blue-400">???</span>
          </div>
        </div>

        <div
          class="relative bg-white shadow-md rounded-lg overflow-hidden trainer-card"
          data-category="team"
        >
          <img
            src="/images/le-klub/photo-killian.jpg"
            loading="lazy"
            alt="Killian GUILLEMOIS"
            class="w-full h-full object-cover object-[center_10%] aspect-square"
          />
          <div
            class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent px-4 py-6 text-white"
          >
            <h3 class="font-bold text-lg">Killian GUILLEMOIS</h3>
            <p class="text-sm">???</p>
            <span class="text-sm text-blue-400">???</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Script personnalisé -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll(
          ".filter-button"
        ) as NodeListOf<HTMLButtonElement>;
        const trainers = document.querySelectorAll(
          ".trainer-card"
        ) as NodeListOf<HTMLElement>;

        // Bouton "Tous" par défaut
        const defaultButton = document.querySelector(
          '.filter-button[data-category="all"]'
        ) as HTMLButtonElement | null;

        if (defaultButton) {
          defaultButton.classList.add("active-button");
        }

        function filterTrainers(category: string): void {
          trainers.forEach((trainer) => {
            const trainerCategories =
              trainer.getAttribute("data-category")?.split(" ") ?? [];

            if (category === "all") {
              // Afficher tous les formateurs sauf la catégorie "team"
              if (trainerCategories.includes("team")) {
                trainer.style.display = "none";
              } else {
                trainer.style.display = "block";
              }
            } else {
              // Affichage normal pour les autres catégories
              trainer.style.display = trainerCategories.includes(category)
                ? "block"
                : "none";
            }
          });
        }

        buttons.forEach((button) => {
          button.addEventListener("click", () => {
            const category = button.getAttribute("data-category") ?? "";

            // Retirer la classe active de tous les boutons
            buttons.forEach((btn) => btn.classList.remove("active-button"));

            // Ajouter la classe active au bouton cliqué
            button.classList.add("active-button");

            // Filtrer
            filterTrainers(category);
          });
        });

        // Afficher les formateurs par défaut (sans l'équipe pédagogique)
        filterTrainers("all");
      });
    </script>

    <style>
      /* Style des boutons par défaut */
      .filter-button {
        transition: transform 0.3s ease;
      }
      /* Style du bouton actif */
      .active-button {
        transform: scale(1.1);
        font-weight: bold;
        background-image: linear-gradient(to right, #8b5cf6, #ec4899);
      }
    </style>
  </div>
</Layout>
