---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <!-- Conteneur principal avec le scroll snapping -->
  <div class="h-screen overflow-y-scroll snap-y snap-mandatory">
    <!-- Section d'introduction avec l'image de fond en full page -->
    <section
      class="snap-start snap-always relative bg-cover bg-center min-h-screen flex items-center justify-center section-wave animate-on-scroll"
      style="background-image: url('/images/index/photo-accueil2.png');"
    >
      <div class="absolute inset-0 bg-black opacity-50"></div>
      <div class="relative z-10 text-center text-white px-4">
        <h1
          class="text-5xl md:text-6xl lg:text-7xl font-bold mb-4 animate-intro drop-shadow-lg"
        >
          L'accompagnement de proximité
        </h1>
        <p
          class="text-xl md:text-2xl lg:text-3xl max-w-3xl mx-auto mb-6 animate-intro drop-shadow-md"
        >
          Chez Kaelia, nous mettons à votre disposition des formations sur
          mesure...
        </p>
        <a
          href="/contact"
          class="relative inline-block font-semibold py-3 px-8 border-2 border-white text-white rounded-full transition-all duration-500 group hover:bg-white hover:text-purple-800 animate-intro drop-shadow-lg transform hover:scale-105"
        >
          <span>Contactez-nous</span>
          <span class="ml-2 group-hover:translate-x-1 transition-transform"
            >→</span
          >
        </a>
      </div>
    </section>

    <!-- Section "Pourquoi choisir Kaelia ?" en full page -->
    <section
      class="snap-start snap-always relative min-h-screen flex flex-col justify-center items-center text-center py-0 bg-white section-angle animate-on-scroll"
      style="background-image: url('/images/index/background.svg'); background-repeat: no-repeat; background-size:auto; "
    >
      <div class="container mx-auto">
        <h2 class="text-4xl md:text-5xl font-bold mb-10 drop-shadow-md">
          Pourquoi choisir <span class="text-purple-600">Kaelia</span> ?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10 mt-10">
          <div class="text-center">
            <h3 class="text-lg md:text-xl font-semibold text-purple-700 mb-2">
              L'humain au cœur de nos actions
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Nous croyons en l’importance d’une relation de confiance et de proximité avec nos clients. Notre priorité est de comprendre vos besoins et vos aspirations, pour créer des relations durables et vous accompagner efficacement vers la réussite de vos objectifs professionnels.
            </p>
          </div>
          <div class="text-center">
            <h3 class="text-lg md:text-xl font-semibold text-purple-700 mb-2">
              Des experts à votre écoute
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Chez Kaelia, notre équipe est composée de professionnels qualifiés et passionnés par le développement des compétences. Grâce à leur expertise pointue dans des domaines variés, ils vous guident avec attention et vous apportent des solutions adaptées à votre parcours et à vos défis professionnels.
            </p>
          </div>
          <div class="text-center">
            <h3 class="text-lg md:text-xl font-semibold text-purple-700 mb-2">
              Un accompagnement personnalisé
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Votre projet est unique, et notre accompagnement l’est tout autant. Nous vous soutenons à chaque étape de votre formation, en adaptant le contenu et le rythme pour répondre précisément à vos attentes. De la première évaluation de vos besoins jusqu’à la validation de vos acquis, vous bénéficiez d’un suivi personnalisé et constant.
            </p>
          </div>
        </div>
        <a
          href="/formations"
          class="relative inline-block font-semibold py-3 px-8 border-2 border-purple-800 text-purple-800 rounded-full transition-all duration-500 hover:bg-purple-800 hover:text-white text-lg drop-shadow-lg transform hover:scale-105"
        >
          <span>Commencer votre formation</span>
          <span class="ml-2 group-hover:translate-x-1 transition-transform"
            >→</span
          >
        </a>
      </div>
    </section>

    <!-- Section "Les 4 étapes de notre accompagnement" en full page avec dégradé -->
    <section
      class="snap-start snap-always relative min-h-screen flex flex-col justify-center items-center text-center text-white section-wave animate-on-scroll"
      style="background: linear-gradient(90deg, #6b46c1, #4a90e2);"
    >
      <div class="container mx-auto">
        <h2 class="text-4xl md:text-5xl font-bold mb-4 drop-shadow-lg">
          Les 4 étapes de notre <span class="text-pink-300">accompagnement</span
          >
        </h2>
        <p class="text-lg md:text-xl mb-10 drop-shadow-md">
          Chez Kaelia Forma'Coach, nous rendons la formation accessible à tous grâce au Compte Personnel de Formation (CPF). Ce dispositif vous permet de financer votre parcours d’apprentissage sans frais supplémentaires, afin de développer vos compétences tout en respectant vos objectifs professionnels.
        </p>
        <div class="flex justify-center items-center mb-12">
          <div class="w-1/4 border-t border-white"></div>
          <div class="mx-2 h-4 w-4 bg-white"></div>
          <div class="w-1/4 border-t border-white"></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div
            class="border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">01</h3>
            <h4 class="text-2xl text-pink-300 font-semibold mb-2">Comprendre votre besoin</h4>
            <p class="text-base">
              Accédez à une formation sur mesure qui s’adapte à vos contraintes et objectifs professionnels. Nous co-créons un programme de formation unique, entièrement éligible au CPF, pour que chaque module soit pertinent et valorise votre profil professionnel.
            </p>
          </div>
          <div
            class="border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">02</h3>
            <h4 class="text-2xl text-pink-300 font-semibold mb-2">Construire la formation</h4>
            <p class="text-base">
              Accédez à une formation sur mesure qui s’adapte à vos contraintes et objectifs professionnels. Nous co-créons un programme de formation unique, entièrement éligible au CPF, pour que chaque module soit pertinent et valorise votre profil professionnel.
            </p>
          </div>
          <div
            class="border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">03</h3>
            <h4 class="text-2xl text-pink-300 font-semibold mb-2">Apprendre et se former</h4>
            <p class="text-base">
              Nos formateurs experts vous accompagnent à chaque étape. Profitez d’un financement CPF pour suivre des sessions enrichissantes, alliant théorie et pratique, et conçues pour vous permettre d'atteindre une maîtrise complète des compétences.

            </p>
          </div>
          <div
            class="border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">04</h3>
            <h4 class="text-2xl text-pink-300 font-semibold mb-2 tex">Faire le bilan</h4>
            <p class="text-base">
              À la fin de la formation, nous effectuons un bilan complet de vos acquis pour vous aider à mesurer vos progrès. Ce suivi personnalisé vous permet de visualiser votre évolution, de renforcer les points nécessaires et de valider officiellement vos nouvelles compétences.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section "KAELIA en quelques chiffres..." en full page -->
    <section
      class="snap-start snap-always min-h-screen flex flex-col justify-center items-center bg-white text-center animate-on-scroll"
      style="background-image: url('/images/index/background2.svg'); background-repeat: no-repeat; background-size: 100% auto; "
    >
      <div class="container mx-auto max-w-5xl">
        <h2 class="text-4xl md:text-5xl font-bold mb-6 drop-shadow-md">
          <span class="text-purple-600">KAELIA</span> en quelques chiffres...
        </h2>
        <p class="text-lg md:text-xl text-gray-700 max-w-2xl mx-auto mb-12">
          Votre succès, notre priorité. Devenez l'expert que vous avez toujours
          rêvé d'être...
        </p>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div
            class="text-white p-6 md:p-10 rounded-lg flex flex-col justify-center col-span-1 md:col-span-2 md:row-span-2 drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-6xl md:text-7xl font-bold mb-2 md:mb-4">4,9/5</h3>
            <p class="text-xl font-semibold">
              <span class="text-pink-300">Satisfaction</span><br /><span
                class="text-white">Client</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">0%</h3>
            <p class="text-xl font-semibold">
              <span class="text-pink-300">Taux</span><br /><span
                class="text-white">d'Absentéisme</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">35</h3>
            <p class="text-xl font-semibold">
              <span class="text-pink-300">Clients</span><br /><span
                class="text-white">Formés</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center col-span-1 md:col-span-2 drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">5/5</h3>
            <p class="text-xl font-semibold">
              <span class="text-pink-300">Satisfaction</span><br /><span
                class="text-white">Google</span
              >
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section "Ils nous font confiance" en full page -->
    <section
      class="snap-start snap-always min-h-screen flex flex-col justify-center items-center bg-white text-center animate-on-scroll"
    >
      <div class="container mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold mb-2 drop-shadow-md">
          Ils nous font <span class="text-purple-600">confiance</span>
        </h2>
        <p class="text-base md:text-lg text-gray-700 max-w-xl mx-auto mb-10">
          La confiance de nos partenaires, notre plus belle récompense.
        </p>
        <div class="logo-carousel">
          <div class="logo-track">
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-IUT.webp"
                alt="IUT Lumière"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-webkonseil.webp"
                alt="Webkonseil"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-opus.webp"
                alt="Opus Formation"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-webylab.webp"
                alt="Webylab"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<style>
  /* Animation de montée et de fondu simultanée pour tous les éléments de la section d'introduction */
  @keyframes introAnimation {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-intro {
    animation: introAnimation 1.2s ease-out forwards;
  }

  /* Animation de fade-in pour les sections */
  @keyframes sectionFadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-on-scroll {
    opacity: 0;
  }

  .animate-on-scroll.animate {
    animation: sectionFadeIn 1s ease-out forwards;
  }

  /* Style de base pour le carrousel */
  .logo-carousel {
    overflow: hidden;
    position: relative;
    width: 100%;
  }

  .logo-track {
    display: flex;
    width: max-content;
  }

  .logo-item {
    flex: 0 0 auto;
    padding: 0 1rem;
  }

  /* Suppression de la hauteur fixe des images */
  .logo-item img {
    filter: grayscale(100%);
    transition: filter 0.3s;
  }

  .logo-item:hover img {
    filter: grayscale(0%);
  }

  /* Animation de fade-in pour les éléments au scroll */
  @keyframes fadeInOnScroll {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-on-scroll {
    opacity: 0;
  }

  .animate-fade-in-on-scroll.animate {
    animation: fadeInOnScroll 1s ease-out forwards;
  }

  /* Ajout de la classe pour scroll-snap-stop */
  .snap-always {
    scroll-snap-stop: always;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const trackElement = document.querySelector(
      ".logo-track"
    ) as HTMLElement | null;
    const items = document.querySelectorAll(".logo-item");

    if (!trackElement) {
      console.error("L'élément avec la classe .logo-track n'a pas été trouvé.");
      return;
    }

    const track = trackElement;

    // Cloner les éléments pour permettre un défilement infini
    function cloneItems() {
      const parent = track.parentElement as HTMLElement | null;
      if (!parent) {
        console.error("Le parent de .logo-track n'a pas été trouvé.");
        return;
      }

      const carouselWidth = parent.offsetWidth;

      while (track.scrollWidth < carouselWidth * 2) {
        items.forEach((item) => {
          const clone = item.cloneNode(true) as HTMLElement;
          track.appendChild(clone);
        });
      }
    }

    cloneItems();

    let scrollPosition = 0;

    function animate() {
      scrollPosition += 1; // Vitesse de défilement
      if (scrollPosition >= track.scrollWidth / 2) {
        scrollPosition = 0;
      }
      track.style.transform = `translateX(-${scrollPosition}px)`;
      requestAnimationFrame(animate);
    }

    animate();

    // Animation au scroll pour les éléments des chiffres et les sections
    const animateOnScrollElements = document.querySelectorAll(
      ".animate-fade-in-on-scroll, .animate-on-scroll"
    );

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate"); // Ajoute la classe pour déclencher l'animation
          }
        });
      },
      { threshold: 0.1 }
    );

    animateOnScrollElements.forEach((element) => {
      observer.observe(element);
    });
  });
</script>
