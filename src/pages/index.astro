---
import Layout from "../layouts/Layout.astro";
---

<Layout isHome={true}>
  <!-- Conteneur principal avec le scroll snapping -->
  <div class="h-screen overflow-y-scroll snap-y snap-mandatory">
    <!-- Section d'introduction avec l'image de fond en full page -->
    <section
      class="full-page-section snap-start snap-always relative bg-cover bg-center h-screen flex items-center justify-center section-wave animate-on-scroll"
      style="background-image: url('/images/index/photo-accueil3.jpg');"
    >
      <div class="absolute inset-0 bg-black opacity-50"></div>
      <div class="relative z-10 text-center text-white px-4">
        <h1
          class="text-6xl md:text-7xl lg:text-8xl font-bold mb-4 animate-intro drop-shadow-lg"
        >
          Formation et Coaching sur-mesure
        </h1>
        <p
          class="text-xl md:text-xl lg:text-xl max-w-3xl mx-auto mb-6 animate-intro drop-shadow-md"
        >
          Chez Kaelia, nous mettons à votre disposition un soutien sur mesure
          tout au long de votre formation. Nos parcours sont certifiés <strong
            >Qualiopi</strong
          > et éligibles au <strong>CPF (Compte Personnel de Formation)</strong
          >, ce qui vous permet de financer votre développement sans contrainte
          financière supplémentaire. Conçues pour répondre aux exigences du
          marché actuel, nos formations s’adressent aux professionnels
          souhaitant renforcer leurs compétences, aux salariés en reconversion,
          et aux entrepreneurs en quête de nouvelles perspectives. Notre équipe
          d’experts vous accompagne à chaque étape pour vous aider à atteindre
          vos objectifs et à maximiser votre potentiel. Élevez votre carrière
          avec Kaelia Forma'Coach en développant les compétences dont vous avez
          besoin pour réussir !
        </p>
        <a
          href="/contact"
          class="relative inline-block font-semibold py-3 px-8 border-2 border-white text-white rounded-full transition-all duration-500 group hover:bg-white hover:text-purple-800 animate-intro drop-shadow-lg transform hover:scale-105"
        >
          <span>Contactez-nous</span>
          <span class="ml-2 group-hover:translate-x-1 transition-transform"
            >→</span
          >
        </a>
      </div>
    </section>

    <!-- Section "Pourquoi choisir Kaelia ?" en full page -->
    <section
      class="full-page-section snap-start snap-always relative h-screen flex flex-col justify-center items-center text-center py-0 bg-white section-angle animate-on-scroll"
      style="background-image: url('/images/index/liserai_quorum_left.svg'); background-repeat: no-repeat; background-size:auto;"
    >
      <div class="container mx-auto">
        <h2 class="text-5xl md:text-6xl font-bold mb-10 drop-shadow-md">
          Pourquoi choisir <span class="text-purple-600">Kaelia</span> ?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10 mt-10">
          <div class="text-center">
            <h3 class="text-xl md:text-3xl font-semibold text-purple-700 mb-2">
              L'humain au cœur de nos actions
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Nous croyons en l’importance d’une relation de confiance et de
              proximité avec nos clients. Notre priorité est de comprendre vos
              besoins et vos aspirations, pour créer des relations durables et
              vous accompagner efficacement vers la réussite de vos objectifs
              professionnels.
            </p>
          </div>
          <div class="text-center">
            <h3 class="text-xl md:text-3xl font-semibold text-purple-700 mb-2">
              Des experts à votre écoute
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Chez Kaelia, notre équipe est composée de professionnels qualifiés
              et passionnés par le développement des compétences. Grâce à leur
              expertise pointue dans des domaines variés, ils vous guident avec
              attention et vous apportent des solutions adaptées à votre
              parcours et à vos défis professionnels.
            </p>
          </div>
          <div class="text-center">
            <h3 class="text-xl md:text-3xl font-semibold text-purple-700 mb-2">
              Un accompagnement personnalisé
            </h3>
            <p class="text-base md:text-lg text-gray-700">
              Votre projet est unique, et notre accompagnement l’est tout
              autant. Nous vous soutenons à chaque étape de votre formation, en
              adaptant le contenu et le rythme pour répondre précisément à vos
              attentes. De la première évaluation de vos besoins jusqu’à la
              validation de vos acquis, vous bénéficiez d’un suivi personnalisé
              et constant.
            </p>
          </div>
        </div>
        <a
          href="/formations"
          class="relative inline-block font-semibold py-3 px-8 border-2 border-purple-800 text-purple-800 rounded-full transition-all duration-500 hover:bg-purple-800 hover:text-white text-lg drop-shadow-lg transform hover:scale-105"
        >
          <span>Commencer votre formation</span>
          <span class="ml-2 group-hover:translate-x-1 transition-transform"
            >→</span
          >
        </a>
      </div>
    </section>

    <!-- Section "Les 4 étapes de notre accompagnement" en full page avec dégradé -->
    <section
      class="full-page-section snap-start snap-always relative h-screen flex flex-col justify-center items-center text-center text-white section-wave animate-on-scroll"
      style="background: linear-gradient(90deg, #6b46c1, #4a90e2);"
    >
      <div class="container mx-auto">
        <h2 class="text-5xl md:text-6xl font-bold mb-4 drop-shadow-lg">
          Les 4 étapes de notre <span class="text-black">accompagnement</span
          >
        </h2>
        <p class="text-lg md:text-xl mb-10 drop-shadow-md">
          Chez Kaelia Forma'Coach, nous rendons la formation accessible à tous
          grâce au Compte Personnel de Formation (CPF). Ce dispositif vous
          permet de financer votre parcours d’apprentissage sans frais
          supplémentaires, afin de développer vos compétences tout en respectant
          vos objectifs professionnels.
        </p>
        <div class="flex justify-center items-center mb-12">
          <div class="w-1/4 border-t border-white"></div>
          <div class="mx-2 h-4 w-4 bg-white"></div>
          <div class="w-1/4 border-t border-white"></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div
            class="etape border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="etape-chiffre text-4xl md:text-5xl lg:text-6xl font-bold mb-2">1</h3>
            <h4 class="text-3xl text-black font-semibold mb-2">
              Comprendre votre besoin
            </h4>
            <p class="text-base">
              Accédez à une formation sur mesure qui s’adapte à vos contraintes
              et objectifs professionnels. Nous co-créons un programme de
              formation unique, entièrement éligible au CPF, pour que chaque
              module soit pertinent et valorise votre profil professionnel.
            </p>
          </div>
          <div
            class="etape border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="etape-chiffre text-4xl md:text-5xl lg:text-6xl font-bold mb-2">2</h3>
            <h4 class="text-3xl text-black font-semibold mb-2">
              Construire la formation
            </h4>
            <p class="text-base">
              Accédez à une formation sur mesure qui s’adapte à vos contraintes
              et objectifs professionnels. Nous co-créons un programme de
              formation unique, entièrement éligible au CPF, pour que chaque
              module soit pertinent et valorise votre profil professionnel.
            </p>
          </div>
          <div
            class="etape border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="etape-chiffre text-4xl md:text-5xl lg:text-6xl font-bold mb-2">3</h3>
            <h4 class="text-3xl text-black font-semibold mb-2">
              Apprendre et se former
            </h4>
            <p class="text-base">
              Nos formateurs experts vous accompagnent à chaque étape. Profitez
              d’un financement CPF pour suivre des sessions enrichissantes,
              alliant théorie et pratique, et conçues pour vous permettre
              d'atteindre une maîtrise complète des compétences.
            </p>
          </div>
          <div
            class="etape border border-white rounded-lg p-6 transition transform hover:scale-105 drop-shadow-md bg-opacity-25 animate-fade-in-on-scroll"
          >
            <h3 class="etape-chiffre text-4xl md:text-5xl lg:text-6xl font-bold mb-2">4</h3>
            <h4 class="text-3xl text-black font-semibold mb-2">
              Faire le bilan
            </h4>
            <p class="text-base">
              À la fin de la formation, nous effectuons un bilan complet de vos
              acquis pour vous aider à mesurer vos progrès. Ce suivi
              personnalisé vous permet de visualiser votre évolution, de
              renforcer les points nécessaires et de valider officiellement vos
              nouvelles compétences.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section "KAELIA en quelques chiffres..." en full page -->
    <section
      class="full-page-section snap-start snap-always h-screen flex flex-col justify-center items-center bg-white text-center animate-on-scroll"
      style="background-image: url('/images/index/liserai_quorum_right.svg'); background-repeat: no-repeat; background-size: 100% auto;"
    >
      <div class="container mx-auto max-w-5xl">
        <h2 class="text-5xl md:text-6xl font-bold mb-6 drop-shadow-md">
          KAELIA en quelques chiffres...
        </h2>
        <p class="text-lg md:text-xl text-gray-700 max-w-2xl mx-auto mb-12">
          Votre succès, notre priorité. Devenez l'expert que vous avez toujours
          rêvé d'être...
        </p>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div
            class="text-white p-6 md:p-10 rounded-lg flex flex-col justify-center col-span-1 md:col-span-2 md:row-span-2 drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-6xl md:text-7xl font-bold mb-2 md:mb-4">4,9/5</h3>
            <p class="text-4xl font-semibold">
              <span class="text-pink-300">Satisfaction</span><br /><span
                class="text-white">Client</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">0%</h3>
            <p class="text-2xl font-semibold">
              <span class="text-pink-300">Taux</span><br /><span
                class="text-white">d'Absentéisme</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">35</h3>
            <p class="text-2xl font-semibold">
              <span class="text-pink-300">Clients</span><br /><span
                class="text-white">Formés</span
              >
            </p>
          </div>
          <div
            class="text-white p-6 md:p-8 rounded-lg flex flex-col justify-center col-span-1 md:col-span-2 drop-shadow-lg animate-fade-in-on-scroll"
            style="background: linear-gradient(90deg, #004aad, #cb6ce6);"
          >
            <h3 class="text-5xl font-bold mb-2">5/5</h3>
            <p class="text-2xl font-semibold">
              <span class="text-pink-300">Avis</span><br /><span
                class="text-white">Google</span
              >
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section "Ils nous font confiance" en full page -->
    <section
      class="full-page-section snap-start snap-always h-screen flex flex-col justify-center items-center bg-white text-center animate-on-scroll"
      style="background-image: url('/images/index/liserai_quorum_left.svg'); background-repeat: no-repeat; background-size: 100% auto;"
    >
      <div class="container mx-auto">
        <h2 class="text-4xl md:text-5xl font-bold mb-2 drop-shadow-md">
          Ils nous font <span class="text-purple-600">confiance</span>
        </h2>
        <p class="text-base md:text-lg text-gray-700 max-w-xl mx-auto mb-10">
          La confiance de nos partenaires, notre plus belle récompense.
        </p>
        <div class="logo-carousel">
          <div class="logo-track">
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-IUT.webp"
                alt="IUT Lumière"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-webkonseil.webp"
                alt="Webkonseil"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-opus.webp"
                alt="Opus Formation"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <div class="logo-item">
              <img
                loading="lazy"
                src="/images/index/logo-partenaire-webylab.webp"
                alt="Webylab"
                class="h-16 md:h-20 lg:h-24 transition-transform"
              />
            </div>
            <!-- Ajoutez d'autres logos si nécessaire -->
          </div>
        </div>

        <!-- Début de la section des témoignages -->
        <h3 class="text-3xl md:text-4xl font-bold mt-12 mb-6 drop-shadow-md">
          Avis de nos clients
        </h3>
        <div
          class="testimonials grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
        >
          <!-- Témoignage 1 -->
          <div class="testimonial bg-gray-100 p-6 rounded-lg shadow-md">
            <p class="text-gray-700 mb-4">
              "Un accompagnement sérieux, bienveillant et compétent. Malgré une
              formation assez courte, j'ai reçu plein de conseils très utiles et
              intéressants de la part de personnes professionnelles,
              passionnées, le tout avec bienveillance. Je recommande vivement
              Kaelia, une équipe réactive, adorable et dans l'humain avant tout
              ! Merci pour votre accompagnement"
            </p>
            <p class="font-bold">Amélie Virgadaula</p>
          </div>
          <!-- Témoignage 2 -->
          <div class="testimonial bg-gray-100 p-6 rounded-lg shadow-md">
            <p class="text-gray-700 mb-4">
              "Formation très instructive et dynamique dispensée par Rudy sur la
              thématique du bien-être au travail et la lutte contre la
              sédentarité. Rudy donne des explications concrètes, précises et se
              montre très à l'écoute. Je n'ai pas vu le temps passer pendant la
              formation théorique et ses conseils sur l'adaptation de mon poste
              de travail se sont avérés précieux. Rudy est par ailleurs un
              excellent ostéopathe. Je recommande vivement !"
            </p>
            <p class="font-bold">Sophie VACHER</p>
          </div>
          <!-- Témoignage 3 -->
          <div class="testimonial bg-gray-100 p-6 rounded-lg shadow-md">
            <p class="text-gray-700 mb-4">
              "J'ai suivi une formation courant septembre 2024 qui m'a beaucoup
              aidé à progresser. La formatrice était très pédagogue et m'a mis à
              disposition une plateforme en ligne. Je recommande cet
              établissement de formation."
            </p>
            <p class="font-bold">Océane Mathieu</p>
          </div>
          <!-- Ajoutez d'autres témoignages si nécessaire -->
        </div>
        <!-- Fin de la section des témoignages -->
      </div>
    </section>
  </div>
</Layout>

<style>
  /* Animation de montée et de fondu simultanée pour tous les éléments de la section d'introduction */
  @keyframes introAnimation {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-intro {
    animation: introAnimation 1.2s ease-out forwards;
  }

  /* Animation de fade-in pour les sections */
  @keyframes sectionFadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-on-scroll {
    opacity: 0;
  }

  .animate-on-scroll.animate {
    animation: sectionFadeIn 1s ease-out forwards;
  }

  /* Style de base pour le carrousel */
  .logo-carousel {
    overflow: hidden;
    position: relative;
    width: 100%;
  }

  .logo-track {
    display: flex;
    width: max-content;
  }

  .logo-item {
    flex: 0 0 auto;
    padding: 0 1rem;
  }

  /* Suppression de la hauteur fixe des images */
  .logo-item img {
    filter: grayscale(100%);
    transition: filter 0.3s;
  }

  .logo-item:hover img {
    filter: grayscale(0%);
  }

  /* Animation de fade-in pour les éléments au scroll */
  @keyframes fadeInOnScroll {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-on-scroll {
    opacity: 0;
  }

  .animate-fade-in-on-scroll.animate {
    animation: fadeInOnScroll 1s ease-out forwards;
  }

  /* Ajout de la classe pour scroll-snap-stop */
  .snap-always {
    scroll-snap-stop: always;
  }

  .etape {
  display: flex;
  flex-direction: column;
  align-items: center; /* Centre horizontalement tout le contenu, y compris le chiffre */
}

.etape-chiffre {
  display: flex;
  align-items: center; /* Centre verticalement le contenu */
  justify-content: center; /* Centre horizontalement le contenu */
  border: 2px solid white; /* Bordure blanche */
  border-radius: 50%; /* Faire un cercle */
  width: 3rem; /* Ajustez la largeur du cercle */
  height: 3rem; /* Ajustez la hauteur du cercle */
  font-size: 1.5rem; /* Taille du texte */
  color: white; /* Couleur du texte */
  box-sizing: border-box; /* Inclure la bordure dans les dimensions */
  margin-bottom: 1rem; /* Ajoute un espace entre le chiffre et le titre en dessous */
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const trackElement = document.querySelector(
      ".logo-track"
    ) as HTMLElement | null;
    const items = document.querySelectorAll(".logo-item");

    if (!trackElement) {
      console.error("L'élément avec la classe .logo-track n'a pas été trouvé.");
      return;
    }

    const track = trackElement;

    // Cloner les éléments pour permettre un défilement infini
    function cloneItems() {
      const parent = track.parentElement;
      if (!parent) {
        console.error("Le parent de .logo-track n'a pas été trouvé.");
        return;
      }

      const carouselWidth = parent.offsetWidth;

      while (track.scrollWidth < carouselWidth * 2) {
        items.forEach((item) => {
          const clone = item.cloneNode(true);
          track.appendChild(clone);
        });
      }
    }

    cloneItems();

    let scrollPosition = 0;

    function animate() {
      scrollPosition += 1; // Vitesse de défilement
      if (scrollPosition >= track.scrollWidth / 2) {
        scrollPosition = 0;
      }
      track.style.transform = `translateX(-${scrollPosition}px)`;
      requestAnimationFrame(animate);
    }

    animate();

    // Animation au scroll pour les éléments des chiffres et les sections
    const animateOnScrollElements = document.querySelectorAll(
      ".animate-fade-in-on-scroll, .animate-on-scroll"
    );

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate"); // Ajoute la classe pour déclencher l'animation
          }
        });
      },
      { threshold: 0.1 }
    );

    animateOnScrollElements.forEach((element) => {
      observer.observe(element);
    });
  });
  document.addEventListener("DOMContentLoaded", () => {
      const header = document.querySelector("header");
      const mainContainer = document.getElementById("main-container");

      if (header && mainContainer) {
        const headerHeight = (header as HTMLElement).offsetHeight;
        const sections = mainContainer.querySelectorAll('.full-page-section');

        sections.forEach((sec, index) => {
          const section = sec as HTMLElement;
          if (index < sections.length - 1) {
            section.style.height = `calc(100vh - ${headerHeight}px)`;
            section.classList.add('snap-start');
          } else {
            section.style.minHeight = `calc(100vh - ${headerHeight}px)`;
          }
        });
      }
    });
</script>
